# Abiotic Factor Server Setup

This document provides an overview of setting up the Abiotic Factor server using Docker.

> **Note:** The image will not work in Windows systems.

## Running in docker compose

You can use the provided `compose.example.yml` file to run the server in a `docker-compose` environment. To do so, follow these steps:

1. Ensure you have Docker and Docker Compose installed on your machine.
2. Navigate to the directory containing the `compose.example.yml` file.
3. Run the following command to start the server:

   ```bash
   docker compose -f compose.example.yml up -d
   ```

4. To stop the server, use:

   ```bash
   docker compose -f compose.example.yml down
   ```

> **Note:** The `compose.example.yml` file contains the default configuration for the server. You can modify the file to customize the server setup according to your requirements.

## Running in docker

You can also run the server using the `docker` command. To do so, follow these steps:

1. Ensure you have Docker installed on your machine.
2. Navigate to the directory containing the `compose.example.yml` file.
3. Run the following command to start the server:

   ```bash
   docker run -d --name abiotic -v abiotic_cache:/app -v abiotic_data:data tordel/abiotic:latest
   ```

   Or with ENV variables:

   ```bash
    docker run -d --name abiotic -v abiotic_cache:/app -v abiotic_data:/data -e MaxServerPlayers=6 -e Port=7777 -e QueryPort=27015 -e ServerPassword=password -e SteamServerName=HappyCupServer -e WorldSaveName=Cascade -e AutoUpdate=true -e GID=1000 -e UID=1000 tordel/abiotic:latest
    ```

4. To stop the server, use:

   ```bash
   docker stop abiotic
   ```

## Data Persistence

This section describes how to ensure that data generated by the server persists across restarts.

1. Ensure that you correctly configure the volumes in the `compose.example.yml` file to keep data safe.
2. The `abiotic_cache` and `abiotic_data` volumes are used to store persistent data.
3. The `abiotic_cache` volume is used to store the server files, while the `abiotic_data` volume is used to store the world save data.

> **Note:** If Docker is installed as root and the container runs as an unprivileged user, the volumes should have permissions that specifically grant access to that user. For instance, you may set permissions to 700 for the corresponding $UID:$GID, provided that this configuration meets your application's security and functional requirements.

## Environment Variables

The following environment variables can be configured to customize your server setup:

- **MaxServerPlayers**: Maximum number of players allowed on the server. Default is `6`.
- **Port**: The port for the server. Default is `7777`.
- **QueryPort**: The port for query requests. Default is `27015`.
- **ServerPassword**: Password required to access the server. Default is `password`.
- **SteamServerName**: Name of the server as seen on Steam. Default is `HappyCupServer`.
- **WorldSaveName**: The name of the world save file. Default is `Cascade`.
- **AutoUpdate**: Enable or disable automatic updates for the server. Default is `true`.
- **GID**: Group ID for the server. Default is `1000`.
- **UID**: User ID for the server. Default is `1000`.

## You can also use this image

[Abiotic Factor Linux Docker by Pleut](https://github.com/Pleut/abiotic-factor-linux-docker)
